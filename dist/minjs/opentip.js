var Opentip,firstAdapter,i,mouseMoved,mousePosition,mousePositionObservers,position,vendors,_i,_len,_ref,__slice=[].slice,__indexOf=[].indexOf||function(t){for(var i=0,e=this.length;i<e;i++)if(i in this&&this[i]===t)return i;return-1},__hasProp={}.hasOwnProperty;for(Opentip=function(){function y(t,i,e,s){var o,n,r,a,h,p,d,l,u,c,g,f,m,v,b=this;if(this.id=++y.lastId,this.debug("Creating Opentip."),y.tips.push(this),this.adapter=y.adapter,(o=this.adapter.data(t,"opentips")||[]).push(this),this.adapter.data(t,"opentips",o),this.triggerElement=this.adapter.wrap(t),1<this.triggerElement.length)throw new Error("You can't call Opentip on multiple elements.");if(this.triggerElement.length<1)throw new Error("Invalid element.");for(this.loaded=!1,this.loading=!1,this.visible=!1,this.waitingToShow=!1,this.waitingToHide=!1,this.currentPosition={left:0,top:0},this.dimensions={width:100,height:50},this.content="",this.redraw=!0,this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1},s=this.adapter.clone(s),"object"==typeof i?(s=i,i=e=void 0):"object"==typeof e&&(s=e,e=void 0),null!=e&&(s.title=e),null!=i&&this.setContent(i),null==s.extends&&(null!=s.style?s.extends=s.style:s.extends=y.defaultStyle),a=[s],v=s;v.extends;){if(p=v.extends,null==(v=y.styles[p]))throw new Error("Invalid style: "+p);a.unshift(v),null==v.extends&&"standard"!==p&&(v.extends="standard")}for((s=(g=this.adapter).extend.apply(g,[{}].concat(__slice.call(a)))).hideTriggers=function(){var t,i,e,o;for(o=[],t=0,i=(e=s.hideTriggers).length;t<i;t++)n=e[t],o.push(n);return o}(),s.hideTrigger&&0===s.hideTriggers.length&&s.hideTriggers.push(s.hideTrigger),d=0,u=(f=["tipJoint","targetJoint","stem"]).length;d<u;d++)s[h=f[d]]&&"string"==typeof s[h]&&(s[h]=new y.Joint(s[h]));for(!s.ajax||!0!==s.ajax&&s.ajax||("A"===this.adapter.tagName(this.triggerElement)?s.ajax=this.adapter.attr(this.triggerElement,"href"):s.ajax=!1),"click"===s.showOn&&"A"===this.adapter.tagName(this.triggerElement)&&this.adapter.observe(this.triggerElement,"click",function(t){return t.preventDefault(),t.stopPropagation(),t.stopped=!0}),s.target&&(s.fixed=!0),!0===s.stem&&(s.stem=new y.Joint(s.tipJoint)),!0===s.target?s.target=this.triggerElement:s.target&&(s.target=this.adapter.wrap(s.target)),this.currentStem=s.stem,null==s.delay&&(s.delay="mouseover"===s.showOn?.2:0),null==s.targetJoint&&(s.targetJoint=new y.Joint(s.tipJoint).flip()),this.showTriggers=[],this.showTriggersWhenVisible=[],this.hideTriggers=[],s.showOn&&"creation"!==s.showOn&&this.showTriggers.push({element:this.triggerElement,event:s.showOn}),null!=s.ajaxCache&&(s.cache=s.ajaxCache,delete s.ajaxCache),this.options=s,this.bound={},l=0,c=(m=["prepareToShow","prepareToHide","show","hide","reposition"]).length;l<c;l++)r=m[l],this.bound[r]=function(t){return function(){return b[t].apply(b,arguments)}}(r);this.adapter.domReady(function(){if(b.activate(),"creation"===b.options.showOn)return b.prepareToShow()})}return y.prototype.STICKS_OUT_TOP=1,y.prototype.STICKS_OUT_BOTTOM=2,y.prototype.STICKS_OUT_LEFT=1,y.prototype.STICKS_OUT_RIGHT=2,y.prototype.class={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"},y.prototype._setup=function(){var t,i,e,o,s,n,r,a,h,p,d;for(this.debug("Setting up the tooltip."),this._buildContainer(),this.hideTriggers=[],o=s=0,r=(h=this.options.hideTriggers).length;s<r;o=++s){if(i=h[o],e=null,t=this.options.hideOn instanceof Array?this.options.hideOn[o]:this.options.hideOn,"string"==typeof i)switch(i){case"trigger":t=t||"mouseout",e=this.triggerElement;break;case"tip":t=t||"mouseover",e=this.container;break;case"target":t=t||"mouseover",e=this.options.target;break;case"closeButton":break;default:throw new Error("Unknown hide trigger: "+i+".")}else t=t||"mouseover",e=this.adapter.wrap(i);e&&this.hideTriggers.push({element:e,event:t,original:i})}for(d=[],n=0,a=(p=this.hideTriggers).length;n<a;n++)i=p[n],d.push(this.showTriggersWhenVisible.push({element:i.element,event:"mouseover"}));return d},y.prototype._buildContainer=function(){if(this.container=this.adapter.create('<div id="opentip-'+this.id+'" class="'+this.class.container+" "+this.class.hidden+" "+this.class.stylePrefix+this.options.className+'"></div>'),this.adapter.css(this.container,{position:"absolute"}),this.options.ajax&&this.adapter.addClass(this.container,this.class.loading),this.options.fixed&&this.adapter.addClass(this.container,this.class.fixed),this.options.showEffect&&this.adapter.addClass(this.container,""+this.class.showEffectPrefix+this.options.showEffect),this.options.hideEffect)return this.adapter.addClass(this.container,""+this.class.hideEffectPrefix+this.options.hideEffect)},y.prototype._buildElements=function(){var t,i;return this.tooltipElement=this.adapter.create('<div class="'+this.class.opentip+'"><div class="'+this.class.header+'"></div><div class="'+this.class.content+'"></div></div>'),this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas")),this.adapter.css(this.backgroundCanvas,{position:"absolute"}),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas)),t=this.adapter.find(this.tooltipElement,"."+this.class.header),this.options.title&&(i=this.adapter.create("<h1></h1>"),this.adapter.update(i,this.options.title,this.options.escapeTitle),this.adapter.append(t,i)),this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this.class.loadingIndicator+'"><span>â†»</span></div>')),0<=__indexOf.call(this.options.hideTriggers,"closeButton")&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this.class.close+'"><span>Close</span></a>'),this.adapter.append(t,this.closeButtonElement)),this.adapter.append(this.container,this.backgroundCanvas),this.adapter.append(this.container,this.tooltipElement),this.adapter.append(document.body,this.container),this._newContent=!0,this.redraw=!0},y.prototype.setContent=function(t){if(this.content=t,this._newContent=!0,"function"==typeof this.content?(this._contentFunction=this.content,this.content=""):this._contentFunction=null,this.visible)return this._updateElementContent()},y.prototype._updateElementContent=function(){var t;return(this._newContent||!this.options.cache&&this._contentFunction)&&(null!=(t=this.adapter.find(this.container,"."+this.class.content))&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(t,this.content,this.options.escapeContent)),this._newContent=!1),this._storeAndLockDimensions(),this.reposition()},y.prototype._storeAndLockDimensions=function(){var t;if(this.container)return t=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:this.dimensions.width+"px",top:this.currentPosition.top+"px",left:this.currentPosition.left+"px"}),this._dimensionsEqual(this.dimensions,t)?void 0:(this.redraw=!0,this._draw())},y.prototype.activate=function(){return this._setupObservers("hidden","hiding")},y.prototype.deactivate=function(){return this.debug("Deactivating tooltip."),this.hide(),this._setupObservers("-showing","-visible","-hidden","-hiding")},y.prototype._setupObservers=function(){var t,o,i,e,s,n,r,a,h,p,d,l,u,c,g,f,m=this;for(n=0,p=(e=1<=arguments.length?__slice.call(arguments,0):[]).length;n<p;n++)if(i=e[n],o=!1,"-"===i.charAt(0)&&(o=!0,i=i.substr(1)),this.currentObservers[i]!==!o)switch(this.currentObservers[i]=!o,t=function(){var t,i,e;return t=1<=arguments.length?__slice.call(arguments,0):[],o?(i=m.adapter).stopObserving.apply(i,t):(e=m.adapter).observe.apply(e,t)},i){case"showing":for(r=0,d=(c=this.hideTriggers).length;r<d;r++)t((s=c[r]).element,s.event,this.bound.prepareToHide);t(null!=document.onresize?document:window,"resize",this.bound.reposition),t(window,"scroll",this.bound.reposition);break;case"visible":for(a=0,l=(g=this.showTriggersWhenVisible).length;a<l;a++)t((s=g[a]).element,s.event,this.bound.prepareToShow);break;case"hiding":for(h=0,u=(f=this.showTriggers).length;h<u;h++)t((s=f[h]).element,s.event,this.bound.prepareToShow);break;case"hidden":break;default:throw new Error("Unknown state: "+i)}return null},y.prototype.prepareToShow=function(){if(this._abortHiding(),this._abortShowing(),!this.visible)return this.debug("Showing in "+this.options.delay+"s."),null==this.container&&this._setup(),this.options.group&&y._abortShowingGroup(this.options.group,this),this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0)},y.prototype.show=function(){var i=this;if(this._abortHiding(),!this.visible)return this._clearTimeouts(),this._triggerElementExists()?(this.debug("Showing now."),null==this.container&&this._setup(),this.options.group&&y._hideGroup(this.options.group,this),this.visible=!0,this.preparingToShow=!1,null==this.tooltipElement&&this._buildElements(),this._updateElementContent(),!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax(),this._searchAndActivateCloseButtons(),this._startEnsureTriggerElement(),this.adapter.css(this.container,{zIndex:y.lastZIndex++}),this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible"),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this.adapter.removeClass(this.container,this.class.hiding),this.adapter.removeClass(this.container,this.class.hidden),this.adapter.addClass(this.container,this.class.goingToShow),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var t;if(i.visible&&!i.preparingToHide)return i.adapter.removeClass(i.container,i.class.goingToShow),i.adapter.addClass(i.container,i.class.showing),t=0,i.options.showEffect&&i.options.showEffectDuration&&(t=i.options.showEffectDuration),i.setCss3Style(i.container,{transitionDuration:t+"s"}),i._visibilityStateTimeoutId=i.setTimeout(function(){return i.adapter.removeClass(i.container,i.class.showing),i.adapter.addClass(i.container,i.class.visible)},t),i._activateFirstInput()}),this._draw()):this.deactivate()},y.prototype._abortShowing=function(){if(this.preparingToShow)return this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=!1,this._setupObservers("-showing","-visible","hiding","hidden")},y.prototype.prepareToHide=function(){if(this._abortShowing(),this._abortHiding(),this.visible)return this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)},y.prototype.hide=function(){var i=this;if(this._abortShowing(),this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),this.visible=!1,this.preparingToHide=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container))return this.adapter.removeClass(this.container,this.class.visible),this.adapter.removeClass(this.container,this.class.showing),this.adapter.addClass(this.container,this.class.goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var t;return i.adapter.removeClass(i.container,i.class.goingToHide),i.adapter.addClass(i.container,i.class.hiding),t=0,i.options.hideEffect&&i.options.hideEffectDuration&&(t=i.options.hideEffectDuration),i.setCss3Style(i.container,{transitionDuration:t+"s"}),i._visibilityStateTimeoutId=i.setTimeout(function(){if(i.adapter.removeClass(i.container,i.class.hiding),i.adapter.addClass(i.container,i.class.hidden),i.setCss3Style(i.container,{transitionDuration:"0s"}),i.options.removeElementsOnHide)return i.debug("Removing HTML elements."),i.adapter.remove(i.container),delete i.container,delete i.tooltipElement},t)})},y.prototype._abortHiding=function(){if(this.preparingToHide)return this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible")},y.prototype.reposition=function(){var t,i,e,o=this;if(null!=(t=this.getPosition())&&(i=this.options.stem,this.options.containInViewport&&(t=(e=this._ensureViewportContainment(t)).position,i=e.stem),!this._positionsEqual(t,this.currentPosition)))return this.options.stem&&!i.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=t,this.currentStem=i,this._draw(),this.adapter.css(this.container,{left:t.left+"px",top:t.top+"px"}),this.defer(function(){var t;return(t=o.adapter.unwrap(o.container)).style.visibility="hidden",t.offsetHeight,t.style.visibility="visible"})},y.prototype.getPosition=function(t,i,e){var o,s,n,r,a,h,p,d,l;if(this.container)return null==t&&(t=this.options.tipJoint),null==i&&(i=this.options.targetJoint),r={},this.options.target?(p=this.adapter.offset(this.options.target),h=this.adapter.dimensions(this.options.target),r=p,i.right?null!=(d=this.adapter.unwrap(this.options.target)).getBoundingClientRect?r.left=d.getBoundingClientRect().right+(null!=(l=window.pageXOffset)?l:document.body.scrollLeft):r.left+=h.width:i.center&&(r.left+=Math.round(h.width/2)),i.bottom?r.top+=h.height:i.middle&&(r.top+=Math.round(h.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(r.left+=this.options.borderWidth),this.options.tipJoint.right&&(r.left-=this.options.borderWidth),this.options.tipJoint.top?r.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(r.top-=this.options.borderWidth))):r=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:mousePosition.y,left:mousePosition.x},this.options.autoOffset&&(n=(a=this.options.stem?this.options.stemLength:0)&&this.options.fixed?2:10,o=t.middle&&!this.options.fixed?15:0,s=t.center&&!this.options.fixed?15:0,t.right?r.left-=n+o:t.left&&(r.left+=n+o),t.bottom?r.top-=n+s:t.top&&(r.top+=n+s),a&&(null==e&&(e=this.options.stem),e.right?r.left-=a:e.left&&(r.left+=a),e.bottom?r.top-=a:e.top&&(r.top+=a))),r.left+=this.options.offset[0],r.top+=this.options.offset[1],t.right?r.left-=this.dimensions.width:t.center&&(r.left-=Math.round(this.dimensions.width/2)),t.bottom?r.top-=this.dimensions.height:t.middle&&(r.top-=Math.round(this.dimensions.height/2)),r},y.prototype._ensureViewportContainment=function(t){var i,e,o,s,n,r,a,h,p,d,l;if(o={position:t,stem:a=this.options.stem},!this.visible||!t)return o;if(!(h=this._sticksOut(t))[0]&&!h[1])return o;if(d=new y.Joint(this.options.tipJoint),this.options.targetJoint&&(p=new y.Joint(this.options.targetJoint)),r=this.adapter.scrollOffset(),l=this.adapter.viewportDimensions(),i=![t.left-r[0],t.top-r[1]],l.width>=this.dimensions.width&&h[0])switch(i=!0,h[0]){case this.STICKS_OUT_LEFT:d.setHorizontal("left"),this.options.targetJoint&&p.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:d.setHorizontal("right"),this.options.targetJoint&&p.setHorizontal("left")}if(l.height>=this.dimensions.height&&h[1])switch(i=!0,h[1]){case this.STICKS_OUT_TOP:d.setVertical("top"),this.options.targetJoint&&p.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:d.setVertical("bottom"),this.options.targetJoint&&p.setVertical("top")}return i?(this.options.stem&&(a=d),t=this.getPosition(d,p,a),n=s=!1,(e=this._sticksOut(t))[0]&&e[0]!==h[0]&&(s=!0,d.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&p.setHorizontal(this.options.targetJoint.horizontal)),e[1]&&e[1]!==h[1]&&(n=!0,d.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&p.setVertical(this.options.targetJoint.vertical)),s&&n?o:((s||n)&&(this.options.stem&&(a=d),t=this.getPosition(d,p,a)),{position:t,stem:a})):o},y.prototype._sticksOut=function(t){var i,e,o,s;return e=this.adapter.scrollOffset(),s=this.adapter.viewportDimensions(),o=[!(i=[t.left-e[0],t.top-e[1]]),!1],i[0]<0?o[0]=this.STICKS_OUT_LEFT:i[0]+this.dimensions.width>s.width&&(o[0]=this.STICKS_OUT_RIGHT),i[1]<0?o[1]=this.STICKS_OUT_TOP:i[1]+this.dimensions.height>s.height&&(o[1]=this.STICKS_OUT_BOTTOM),o},y.prototype._draw=function(){var t,i,e,o,l,a,s,u,c,g,h,n,p,d,r,f,m,v,b,w=this;if(this.backgroundCanvas&&this.redraw){if(this.debug("Drawing background."),this.redraw=!1,this.currentStem){for(r=0,f=(m=["top","right","bottom","left"]).length;r<f;r++)n=m[r],this.adapter.removeClass(this.container,"stem-"+n);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal),this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)}return a=[0,0],s=[0,0],0<=__indexOf.call(this.options.hideTriggers,"closeButton")&&(l=new y.Joint("top right"===(null!=(v=this.currentStem)?v.toString():void 0)?"top left":"top right"),a=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],s=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]),e=this.adapter.clone(this.dimensions),o=[0,0],this.options.borderWidth&&(e.width+=2*this.options.borderWidth,e.height+=2*this.options.borderWidth,o[0]-=this.options.borderWidth,o[1]-=this.options.borderWidth),this.options.shadow&&(e.width+=2*this.options.shadowBlur,e.width+=Math.max(0,this.options.shadowOffset[0]-2*this.options.shadowBlur),e.height+=2*this.options.shadowBlur,e.height+=Math.max(0,this.options.shadowOffset[1]-2*this.options.shadowBlur),o[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),o[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1])),i={left:0,right:0,top:0,bottom:0},this.currentStem&&(this.currentStem.left?i.left=this.options.stemLength:this.currentStem.right&&(i.right=this.options.stemLength),this.currentStem.top?i.top=this.options.stemLength:this.currentStem.bottom&&(i.bottom=this.options.stemLength)),l&&(l.left?i.left=Math.max(i.left,s[0]):l.right&&(i.right=Math.max(i.right,s[0])),l.top?i.top=Math.max(i.top,s[1]):l.bottom&&(i.bottom=Math.max(i.bottom,s[1]))),e.width+=i.left+i.right,e.height+=i.top+i.bottom,o[0]-=i.left,o[1]-=i.top,this.currentStem&&this.options.borderWidth&&(b=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,this.options.borderWidth),d=b.stemLength,p=b.stemBase),(t=this.adapter.unwrap(this.backgroundCanvas)).width=e.width,t.height=e.height,this.adapter.css(this.backgroundCanvas,{width:t.width+"px",height:t.height+"px",left:o[0]+"px",top:o[1]+"px"}),(u=t.getContext("2d")).setTransform(1,0,0,1,0,0),u.clearRect(0,0,t.width,t.height),u.beginPath(),u.fillStyle=this._getColor(u,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal),u.lineJoin="miter",u.miterLimit=500,h=this.options.borderWidth/2,this.options.borderWidth?(u.strokeStyle=this.options.borderColor,u.lineWidth=this.options.borderWidth):(d=this.options.stemLength,p=this.options.stemBase),null==p&&(p=0),g=function(t,i,e){if(e&&u.moveTo(Math.max(p,w.options.borderRadius,a[0])+1-h,-h),i)return u.lineTo(t/2-p/2,-h),u.lineTo(t/2,-d-h),u.lineTo(t/2+p/2,-h)},c=function(t,i,e){var o,s,n,r;return t?(u.lineTo(-p+h,0-h),u.lineTo(d+h,-d-h),u.lineTo(h,p-h)):i?(r=w.options.closeButtonOffset,n=a[0],e%2!=0&&(r=[r[1],r[0]],n=a[1]),o=Math.acos(r[1]/w.options.closeButtonRadius),s=Math.acos(r[0]/w.options.closeButtonRadius),u.lineTo(-n+h,-h),u.arc(h-r[0],-h+r[1],w.options.closeButtonRadius,-(Math.PI/2+o),s,!1)):(u.lineTo(-w.options.borderRadius+h,-h),u.quadraticCurveTo(h,-h,h,w.options.borderRadius-h))},u.translate(-o[0],-o[1]),u.save(),function(){var t,i,e,o,s,n,r,a,h,p,d;for(d=[],i=h=0,p=y.positions.length/2;0<=p?h<p:p<h;i=0<=p?++h:--h)s=2*i,n=0===i||3===i?0:w.dimensions.width,r=i<2?0:w.dimensions.height,a=Math.PI/2*i,e=i%2==0?w.dimensions.width:w.dimensions.height,o=new y.Joint(y.positions[s]),t=new y.Joint(y.positions[s+1]),u.save(),u.translate(n,r),u.rotate(a),g(e,o.eql(w.currentStem),0===i),u.translate(e,0),c(t.eql(w.currentStem),t.eql(l),i),d.push(u.restore())}(),u.closePath(),u.save(),this.options.shadow&&(u.shadowColor=this.options.shadowColor,u.shadowBlur=this.options.shadowBlur,u.shadowOffsetX=this.options.shadowOffset[0],u.shadowOffsetY=this.options.shadowOffset[1]),u.fill(),u.restore(),this.options.borderWidth&&u.stroke(),u.restore(),l?(w.options.closeButtonRadius,_="top right"===l.toString()?[(T=[w.dimensions.width-w.options.closeButtonOffset[0],w.options.closeButtonOffset[1]])[0]+h,T[1]-h]:[(T=[w.options.closeButtonOffset[0],w.options.closeButtonOffset[1]])[0]-h,T[1]-h],u.translate(_[0],_[1]),O=w.options.closeButtonCrossSize/2,u.save(),u.beginPath(),u.strokeStyle=w.options.closeButtonCrossColor,u.lineWidth=w.options.closeButtonCrossLineWidth,u.lineCap="round",u.moveTo(-O,-O),u.lineTo(O,O),u.stroke(),u.beginPath(),u.moveTo(O,-O),u.lineTo(-O,O),u.stroke(),u.restore(),w.adapter.css(w.closeButtonElement,{left:T[0]-O-w.options.closeButtonLinkOverscan+"px",top:T[1]-O-w.options.closeButtonLinkOverscan+"px",width:w.options.closeButtonCrossSize+2*w.options.closeButtonLinkOverscan+"px",height:w.options.closeButtonCrossSize+2*w.options.closeButtonLinkOverscan+"px"})):void 0;var _,O,T}},y.prototype._getPathStemMeasures=function(t,i,e){var o,s,n,r;if(n=e/2,o=2*(s=Math.atan(t/2/i)),(r=n+i-2*(n/Math.sin(o))*Math.cos(s))<0)throw new Error("Sorry but your stemLength / stemBase ratio is strange.");return{stemLength:r,stemBase:Math.tan(s)*r*2}},y.prototype._getColor=function(t,i,e,o){var s,n,r,a,h;if(null==o&&(o=!1),"string"==typeof e)return e;for(n=o?t.createLinearGradient(0,0,i.width,0):t.createLinearGradient(0,0,0,i.height),r=a=0,h=e.length;a<h;r=++a)s=e[r],n.addColorStop(s[0],s[1]);return n},y.prototype._searchAndActivateCloseButtons=function(){var t,i,e,o;for(i=0,e=(o=this.adapter.findAll(this.container,"."+this.class.close)).length;i<e;i++)t=o[i],this.hideTriggers.push({element:this.adapter.wrap(t),event:"click"});if(this.currentObservers.showing&&this._setupObservers("-showing","showing"),this.currentObservers.visible)return this._setupObservers("-visible","visible")},y.prototype._activateFirstInput=function(){var t;return null!=(t=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea")))&&"function"==typeof t.focus?t.focus():void 0},y.prototype._followMousePosition=function(){if(!this.options.fixed)return y._observeMousePosition(this.bound.reposition)},y.prototype._stopFollowingMousePosition=function(){if(!this.options.fixed)return y._stopObservingMousePosition(this.bound.reposition)},y.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)},y.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)},y.prototype._clearTimeouts=function(){return clearTimeout(this._visibilityStateTimeoutId),this._clearShowTimeout(),this._clearHideTimeout()},y.prototype._triggerElementExists=function(){var t;for(t=this.adapter.unwrap(this.triggerElement);t.parentNode;){if("BODY"===t.parentNode.tagName)return!0;t=t.parentNode}return!1},y.prototype._loadAjax=function(){var e=this;if(!this.loading)return this.loaded=!1,this.loading=!0,this.adapter.addClass(this.container,this.class.loading),this.setContent(""),this.debug("Loading content from "+this.options.ajax),this.adapter.ajax({url:this.options.ajax,method:this.options.ajaxMethod,onSuccess:function(t){return e.debug("Loading successful."),e.adapter.removeClass(e.container,e.class.loading),e.setContent(t)},onError:function(t){var i;return i=e.options.ajaxErrorMessage,e.debug(i,t),e.setContent(i),e.adapter.addClass(e.container,e.class.ajaxError)},onComplete:function(){return e.adapter.removeClass(e.container,e.class.loading),e.loading=!1,e.loaded=!0,e._searchAndActivateCloseButtons(),e._activateFirstInput(),e.reposition()}})},y.prototype._ensureTriggerElement=function(){if(!this._triggerElementExists())return this.deactivate(),this._stopEnsureTriggerElement()},y.prototype._ensureTriggerElementInterval=1e3,y.prototype._startEnsureTriggerElement=function(){var t=this;return this._ensureTriggerElementTimeoutId=setInterval(function(){return t._ensureTriggerElement()},this._ensureTriggerElementInterval)},y.prototype._stopEnsureTriggerElement=function(){return clearInterval(this._ensureTriggerElementTimeoutId)},y}(),vendors=["khtml","ms","o","moz","webkit"],Opentip.prototype.setCss3Style=function(o,t){var s,n,r,a,i;for(s in o=this.adapter.unwrap(o),i=[],t)__hasProp.call(t,s)&&(n=t[s],null!=o.style[s]?i.push(o.style[s]=n):i.push(function(){var t,i,e;for(e=[],t=0,i=vendors.length;t<i;t++)r=vendors[t],a=""+this.ucfirst(r)+this.ucfirst(s),null!=o.style[a]?e.push(o.style[a]=n):e.push(void 0);return e}.call(this)));return i},Opentip.prototype.defer=function(t){return setTimeout(t,0)},Opentip.prototype.setTimeout=function(t,i){return setTimeout(t,i?1e3*i:0)},Opentip.prototype.ucfirst=function(t){return null==t?"":t.charAt(0).toUpperCase()+t.slice(1)},Opentip.prototype.dasherize=function(t){return t.replace(/([A-Z])/g,function(t,i){return"-"+i.toLowerCase()})},mousePositionObservers=[],mousePosition={x:0,y:0},mouseMoved=function(t){var i,e,o,s;for(mousePosition=Opentip.adapter.mousePosition(t),s=[],e=0,o=mousePositionObservers.length;e<o;e++)i=mousePositionObservers[e],s.push(i());return s},Opentip.followMousePosition=function(){return Opentip.adapter.observe(document.body,"mousemove",mouseMoved)},Opentip._observeMousePosition=function(t){return mousePositionObservers.push(t)},Opentip._stopObservingMousePosition=function(o){var s;return mousePositionObservers=function(){var t,i,e;for(e=[],t=0,i=mousePositionObservers.length;t<i;t++)(s=mousePositionObservers[t])!==o&&e.push(s);return e}()},Opentip.Joint=function(){function t(t){null!=t&&(t instanceof Opentip.Joint&&(t=t.toString()),this.set(t))}return t.prototype.set=function(t){return t=t.toLowerCase(),this.setHorizontal(t),this.setVertical(t),this},t.prototype.setHorizontal=function(t){var i,e,o,s,n,r,a;for(o=0,n=(e=["left","center","right"]).length;o<n;o++)i=e[o],~t.indexOf(i)&&(this.horizontal=i.toLowerCase());for(null==this.horizontal&&(this.horizontal="center"),a=[],s=0,r=e.length;s<r;s++)i=e[s],a.push(this[i]=this.horizontal===i?i:void 0);return a},t.prototype.setVertical=function(t){var i,e,o,s,n,r,a;for(o=0,n=(e=["top","middle","bottom"]).length;o<n;o++)i=e[o],~t.indexOf(i)&&(this.vertical=i.toLowerCase());for(null==this.vertical&&(this.vertical="middle"),a=[],s=0,r=e.length;s<r;s++)i=e[s],a.push(this[i]=this.vertical===i?i:void 0);return a},t.prototype.eql=function(t){return null!=t&&this.horizontal===t.horizontal&&this.vertical===t.vertical},t.prototype.flip=function(){var t;return t=(Opentip.position[this.toString(!0)]+4)%8,this.set(Opentip.positions[t]),this},t.prototype.toString=function(t){var i,e;return null==t&&(t=!1),e="middle"===this.vertical?"":this.vertical,i="center"===this.horizontal?"":this.horizontal,e&&i&&(i=t?Opentip.prototype.ucfirst(i):" "+i),""+e+i},t}(),Opentip.prototype._positionsEqual=function(t,i){return null!=t&&null!=i&&t.left===i.left&&t.top===i.top},Opentip.prototype._dimensionsEqual=function(t,i){return null!=t&&null!=i&&t.width===i.width&&t.height===i.height},Opentip.prototype.debug=function(){var t;if(t=1<=arguments.length?__slice.call(arguments,0):[],Opentip.debug&&null!=("undefined"!=typeof console&&null!==console?console.debug:void 0))return t.unshift("#"+this.id+" |"),console.debug.apply(console,t)},Opentip.findElements=function(){var t,i,e,o,s,n,r,a,h,p;for(p=[],r=0,a=(h=(t=Opentip.adapter).findAll(document.body,"[data-ot]")).length;r<a;r++){for(o in e=h[r],n={},""!==(i=t.data(e,"ot"))&&"true"!==i&&"yes"!==i||(i=t.attr(e,"title"),t.attr(e,"title","")),i=i||"",Opentip.styles.standard)null!=(s=t.data(e,"ot"+Opentip.prototype.ucfirst(o)))&&("yes"===s||"true"===s||"on"===s?s=!0:"no"!==s&&"false"!==s&&"off"!==s||(s=!1),n[o]=s);p.push(new Opentip(e,i,n))}return p},Opentip.version="2.4.6",Opentip.debug=!1,Opentip.lastId=0,Opentip.lastZIndex=100,Opentip.tips=[],Opentip._abortShowingGroup=function(t,i){var e,o,s,n,r;for(r=[],o=0,s=(n=Opentip.tips).length;o<s;o++)(e=n[o])!==i&&e.options.group===t?r.push(e._abortShowing()):r.push(void 0);return r},Opentip._hideGroup=function(t,i){var e,o,s,n,r;for(r=[],o=0,s=(n=Opentip.tips).length;o<s;o++)(e=n[o])!==i&&e.options.group===t?r.push(e.hide()):r.push(void 0);return r},Opentip.adapters={},Opentip.adapter=null,firstAdapter=!0,Opentip.addAdapter=function(t){if(Opentip.adapters[t.name]=t,firstAdapter)return(Opentip.adapter=t).domReady(Opentip.findElements),t.domReady(Opentip.followMousePosition),firstAdapter=!1},Opentip.positions=["top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"],Opentip.position={},i=_i=0,_len=(_ref=Opentip.positions).length;_i<_len;i=++_i)position=_ref[i],Opentip.position[position]=i;Opentip.styles={standard:{extends:null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{extends:"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{extends:"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{extends:"standard",className:"alert",borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}},Opentip.defaultStyle="standard","undefined"!=typeof module&&null!==module?module.exports=Opentip:window.Opentip=Opentip;