function elevateIsGutenberg(){return jQuery(".gutenberg__editor").length}function elevateUpdateGooglePreview(){var e=jQuery("#elevate_post_title").attr("placeholder"),t=jQuery("#elevate_post_title").val();t.length?(jQuery(".google-title").html(t),jQuery(".search-title").html(t)):(jQuery(".google-title").html(e),jQuery(".search-title").html(e));var a=jQuery("#elevate_post_description").val();a.length?(jQuery(".google-desc").html(a),jQuery(".search-desc").html(a),jQuery(".twitter-desc").html(a)):(jQuery(".google-desc").html(jQuery("#elevate_post_description").attr("placeholder")),jQuery(".search-desc").html(jQuery("#elevate_post_description").attr("placeholder")),jQuery(".twitter-desc").html(jQuery("#elevate_post_description").attr("placeholder")));var l=!1,r=jQuery.parseJSON(ElevateData.thumbnail_behaviour),i=0,n=1;elevateIsGutenberg()?(i=jQuery(".editor-post-featured-image img"),jQuery(".editor-post-featured-image").length||(n=0)):i=jQuery("#set-post-thumbnail img"),i.length&&i.attr("src")&&("featured"==r||"include_content"==r)&&(l=i.attr("src")),ElevateData.first_post_image&&"include_content"==r&&!l&&(l=jQuery.parseJSON(ElevateData.first_post_image)),!ElevateData.default_image_url||l&&"force_global"!=r||(l=jQuery.parseJSON(ElevateData.default_image_url)),currentImage=jQuery("#social_preview .twitter-preview img").attr("src"),currentImage!=l&&n&&(jQuery("#social_preview .previews img").attr("src",l),l?jQuery("#social_preview .previews img").show():jQuery("#social_preview .previews img").hide())}var elevateUpdatingTitle=0;function elevateUpdateMetaTitle(){if(jQuery("#title").val().length){var e={content_title:jQuery("#title").val(),content_desc:jQuery("#content").val(),content_id:ElevateData.post_id};elevateUpdatingTitle||(elevateUpdatingTitle=1,elevateAdminAjax("get_updated_title",e,function(e){var t=jQuery.parseJSON(e);jQuery("#elevate_post_title").attr("placeholder",t.body.new_title),1==ElevateData.intelligent_desc&&jQuery("#elevate_post_description").attr("placeholder",t.body.new_desc),elevateUpdateGooglePreview(),elevateUpdateContentAnalytics(),elevateUpdatingTitle=0}))}}function elevateGutenbergScan(){titleInfo=jQuery(".editor-post-title__input").html();var e=jQuery(".mce-content-body"),t="",a=0;e.each(function(){if(jQuery(this).length){var e=jQuery(this).text();e&&null!=typeof e&&e.length&&"undefined"!=e&&(a?t=t+" "+jQuery.trim(e):(t=jQuery.trim(e),a=1))}});var l={content_title:titleInfo,content_desc:t,content_id:ElevateData.post_id};elevateUpdatingTitle||(elevateUpdatingTitle=1,elevateAdminAjax("get_updated_title",l,function(e){var t=jQuery.parseJSON(e);jQuery("#elevate_post_title").attr("placeholder",t.body.new_title),1==ElevateData.intelligent_desc&&jQuery("#elevate_post_description").attr("placeholder",t.body.new_desc),elevateUpdateGooglePreview(),elevateUpdateContentAnalytics(),elevateUpdatingTitle=0}))}var hasTitleContent=0,hasDescContent=0;function elevateUpdateContentAnalytics(){var e=0,t=0;if(a=elevateIsGutenberg()?jQuery("#post-title-0").val():jQuery("#title").val(),1!=ElevateData.is_new_page||hasTitleContent||hasDescContent){null==typeof a||a.length?jQuery("#elevate-no-title").hide():(jQuery("#elevate-no-title").show(),e=1);var a,l=jQuery("#elevate_post_title");(a=l.val()).length||(a=l.attr("placeholder")),70<a.length?(t=1,jQuery("#elevate-title-long").show()):jQuery("#elevate-title-long").hide(),a.length<20?(t=1,jQuery("#elevate-title-short").show()):jQuery("#elevate-title-short").hide();var r=jQuery("#elevate_post_description"),i=r.val();i.length||(i=r.attr("placeholder")),300<i.length?(t=1,jQuery("#elevate-desc-long").show()):jQuery("#elevate-desc-long").hide(),i.length<50?(t=1,jQuery("#elevate-desc-short").show()):jQuery("#elevate-desc-short").hide();var n=elevateIsGutenberg();e?(jQuery(".desc .bad").show(),jQuery(".desc .good, .desc .warning, .desc .waiting").hide(),n&&jQuery('button[aria-label="Elevate SEO"]').css("background","rgba( 255, 0, 0, 0.4 )")):t?(jQuery(".desc .warning").show(),jQuery(".desc .bad, .desc .good, .desc .waiting").hide(),n&&jQuery('button[aria-label="Elevate SEO"]').css("background","rgba( 255, 165, 0, 0.4 )")):(jQuery(".desc .good").show(),jQuery(".desc .bad, .desc .warning, .desc .waiting").hide(),n&&jQuery('button[aria-label="Elevate SEO"]').css("background","inherit")),e||t?jQuery("#elevate-all-good").hide():jQuery("#elevate-all-good").show()}else jQuery(".desc .waiting").show(),jQuery(".desc .bad, .desc .good, .desc .warning").hide()}function elevateDoGutenberg(){var e=wp.element.createElement,t=wp.element.Fragment,a=wp.editPost.PluginSidebar,l=wp.editPost.PluginSidebarMoreMenuItem;(0,wp.plugins.registerPlugin)("elevate-seo",{icon:"search",render:function(){return e(t,{},e(l,{target:"elevate-seo"},"Elevate SEO"),e(a,{name:"elevate-seo",title:"Elevate SEO"},e("div",{class:"guten side-box"},e("div",{class:"status desc"},e("span",{class:"waiting"},e("i",{class:"fa fa-pencil"}," "),e("span","",ElevateData.guten_not_enough)),e("span",{class:"good"},e("i",{class:"fa fa-check"}," "),e("span","",ElevateData.guten_all_good)),e("span",{class:"warning"},e("i",{class:"fa fa-warning"}," "),e("span","",ElevateData.guten_a_few_adjustments)),e("span",{class:"bad"},e("i",{class:"fa fa-exclamation"}," "),e("span","",ElevateData.guten_serious))),e("a",{class:"social_preview_open learn-more button"},ElevateData.guten_web_preview),e("a",{class:"learn_more_open learn-more button"},ElevateData.guten_learn_more),e("span",{class:"clearer"},""))))}}),jQuery(".edit-post-pinned-plugins button").live("click",function(){setTimeout(function(){elevateUpdateContentAnalytics()},5)})}function doElevateMetaReady(){Opentip.defaultStyle="dark";var a=0;elevateIsGutenberg()?(jQuery("#post-title-0").live("blur",function(){hasTitleContent=1,elevateGutenbergScan()}),jQuery(".mce-content-body").live("blur",function(){elevateGutenbergScan()}),elevateDoGutenberg(),setInterval(function(){var e=jQuery(".editor-post-featured-image img");if(e){var t=e.attr("src");t!=a&&(elevateUpdateGooglePreview(),a=t)}},500)):(jQuery("#title").on("blur",function(){hasTitleContent=1,elevateUpdateMetaTitle()}),jQuery("#content").on("blur",function(){elevateUpdateMetaTitle()}),setInterval(function(){var e=jQuery("#set-post-thumbnail img");if(e){var t=e.attr("src");t!=a&&(elevateUpdateGooglePreview(),a=t)}},500)),setTimeout(function(){elevateUpdateGooglePreview(),elevateUpdateContentAnalytics()},10),jQuery("#social_preview, #learn_more, #wizard_issue").popup({opacity:.3,transition:"all 0.3s"}),jQuery("#social_preview li i").click(function(){jQuery("#social_preview li i").removeClass("active"),jQuery(this).addClass("active");var e=jQuery(this).attr("data-tab");jQuery("div.google-preview, div.twitter-preview, div.facebook-preview, div.linkedin-preview").hide(),jQuery("div."+e).show()})}jQuery(document).ready(function(){doElevateMetaReady()});