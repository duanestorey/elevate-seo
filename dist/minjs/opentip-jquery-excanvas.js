var Opentip,firstAdapter,i,mouseMoved,mousePosition,mousePositionObservers,position,vendors,_i,_len,_ref,__slice=[].slice,__indexOf=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},__hasProp={}.hasOwnProperty;for(Opentip=function(){function T(t,e,i,s){var o,n,r,a,h,l,p,d,u,c,f,g,m,v,_=this;if(this.id=++T.lastId,this.debug("Creating Opentip."),T.tips.push(this),this.adapter=T.adapter,(o=this.adapter.data(t,"opentips")||[]).push(this),this.adapter.data(t,"opentips",o),this.triggerElement=this.adapter.wrap(t),1<this.triggerElement.length)throw new Error("You can't call Opentip on multiple elements.");if(this.triggerElement.length<1)throw new Error("Invalid element.");for(this.loaded=!1,this.loading=!1,this.visible=!1,this.waitingToShow=!1,this.waitingToHide=!1,this.currentPosition={left:0,top:0},this.dimensions={width:100,height:50},this.content="",this.redraw=!0,this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1},s=this.adapter.clone(s),"object"==typeof e?(s=e,e=i=void 0):"object"==typeof i&&(s=i,i=void 0),null!=i&&(s.title=i),null!=e&&this.setContent(e),null==s.extends&&(null!=s.style?s.extends=s.style:s.extends=T.defaultStyle),a=[s],v=s;v.extends;){if(l=v.extends,null==(v=T.styles[l]))throw new Error("Invalid style: "+l);a.unshift(v),null==v.extends&&"standard"!==l&&(v.extends="standard")}for((s=(f=this.adapter).extend.apply(f,[{}].concat(__slice.call(a)))).hideTriggers=function(){var t,e,i,o;for(o=[],t=0,e=(i=s.hideTriggers).length;t<e;t++)n=i[t],o.push(n);return o}(),s.hideTrigger&&0===s.hideTriggers.length&&s.hideTriggers.push(s.hideTrigger),p=0,u=(g=["tipJoint","targetJoint","stem"]).length;p<u;p++)s[h=g[p]]&&"string"==typeof s[h]&&(s[h]=new T.Joint(s[h]));for(!s.ajax||!0!==s.ajax&&s.ajax||("A"===this.adapter.tagName(this.triggerElement)?s.ajax=this.adapter.attr(this.triggerElement,"href"):s.ajax=!1),"click"===s.showOn&&"A"===this.adapter.tagName(this.triggerElement)&&this.adapter.observe(this.triggerElement,"click",function(t){return t.preventDefault(),t.stopPropagation(),t.stopped=!0}),s.target&&(s.fixed=!0),!0===s.stem&&(s.stem=new T.Joint(s.tipJoint)),!0===s.target?s.target=this.triggerElement:s.target&&(s.target=this.adapter.wrap(s.target)),this.currentStem=s.stem,null==s.delay&&(s.delay="mouseover"===s.showOn?.2:0),null==s.targetJoint&&(s.targetJoint=new T.Joint(s.tipJoint).flip()),this.showTriggers=[],this.showTriggersWhenVisible=[],this.hideTriggers=[],s.showOn&&"creation"!==s.showOn&&this.showTriggers.push({element:this.triggerElement,event:s.showOn}),null!=s.ajaxCache&&(s.cache=s.ajaxCache,delete s.ajaxCache),this.options=s,this.bound={},d=0,c=(m=["prepareToShow","prepareToHide","show","hide","reposition"]).length;d<c;d++)r=m[d],this.bound[r]=function(t){return function(){return _[t].apply(_,arguments)}}(r);this.adapter.domReady(function(){if(_.activate(),"creation"===_.options.showOn)return _.prepareToShow()})}return T.prototype.STICKS_OUT_TOP=1,T.prototype.STICKS_OUT_BOTTOM=2,T.prototype.STICKS_OUT_LEFT=1,T.prototype.STICKS_OUT_RIGHT=2,T.prototype.class={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"},T.prototype._setup=function(){var t,e,i,o,s,n,r,a,h,l,p;for(this.debug("Setting up the tooltip."),this._buildContainer(),this.hideTriggers=[],o=s=0,r=(h=this.options.hideTriggers).length;s<r;o=++s){if(e=h[o],i=null,t=this.options.hideOn instanceof Array?this.options.hideOn[o]:this.options.hideOn,"string"==typeof e)switch(e){case"trigger":t=t||"mouseout",i=this.triggerElement;break;case"tip":t=t||"mouseover",i=this.container;break;case"target":t=t||"mouseover",i=this.options.target;break;case"closeButton":break;default:throw new Error("Unknown hide trigger: "+e+".")}else t=t||"mouseover",i=this.adapter.wrap(e);i&&this.hideTriggers.push({element:i,event:t,original:e})}for(p=[],n=0,a=(l=this.hideTriggers).length;n<a;n++)e=l[n],p.push(this.showTriggersWhenVisible.push({element:e.element,event:"mouseover"}));return p},T.prototype._buildContainer=function(){if(this.container=this.adapter.create('<div id="opentip-'+this.id+'" class="'+this.class.container+" "+this.class.hidden+" "+this.class.stylePrefix+this.options.className+'"></div>'),this.adapter.css(this.container,{position:"absolute"}),this.options.ajax&&this.adapter.addClass(this.container,this.class.loading),this.options.fixed&&this.adapter.addClass(this.container,this.class.fixed),this.options.showEffect&&this.adapter.addClass(this.container,""+this.class.showEffectPrefix+this.options.showEffect),this.options.hideEffect)return this.adapter.addClass(this.container,""+this.class.hideEffectPrefix+this.options.hideEffect)},T.prototype._buildElements=function(){var t,e;return this.tooltipElement=this.adapter.create('<div class="'+this.class.opentip+'"><div class="'+this.class.header+'"></div><div class="'+this.class.content+'"></div></div>'),this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas")),this.adapter.css(this.backgroundCanvas,{position:"absolute"}),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas)),t=this.adapter.find(this.tooltipElement,"."+this.class.header),this.options.title&&(e=this.adapter.create("<h1></h1>"),this.adapter.update(e,this.options.title,this.options.escapeTitle),this.adapter.append(t,e)),this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this.class.loadingIndicator+'"><span>â†»</span></div>')),0<=__indexOf.call(this.options.hideTriggers,"closeButton")&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this.class.close+'"><span>Close</span></a>'),this.adapter.append(t,this.closeButtonElement)),this.adapter.append(this.container,this.backgroundCanvas),this.adapter.append(this.container,this.tooltipElement),this.adapter.append(document.body,this.container),this._newContent=!0,this.redraw=!0},T.prototype.setContent=function(t){if(this.content=t,this._newContent=!0,"function"==typeof this.content?(this._contentFunction=this.content,this.content=""):this._contentFunction=null,this.visible)return this._updateElementContent()},T.prototype._updateElementContent=function(){var t;return(this._newContent||!this.options.cache&&this._contentFunction)&&(null!=(t=this.adapter.find(this.container,"."+this.class.content))&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(t,this.content,this.options.escapeContent)),this._newContent=!1),this._storeAndLockDimensions(),this.reposition()},T.prototype._storeAndLockDimensions=function(){var t;if(this.container)return t=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:this.dimensions.width+"px",top:this.currentPosition.top+"px",left:this.currentPosition.left+"px"}),this._dimensionsEqual(this.dimensions,t)?void 0:(this.redraw=!0,this._draw())},T.prototype.activate=function(){return this._setupObservers("hidden","hiding")},T.prototype.deactivate=function(){return this.debug("Deactivating tooltip."),this.hide(),this._setupObservers("-showing","-visible","-hidden","-hiding")},T.prototype._setupObservers=function(){var t,o,e,i,s,n,r,a,h,l,p,d,u,c,f,g,m=this;for(n=0,l=(i=1<=arguments.length?__slice.call(arguments,0):[]).length;n<l;n++)if(e=i[n],o=!1,"-"===e.charAt(0)&&(o=!0,e=e.substr(1)),this.currentObservers[e]!==!o)switch(this.currentObservers[e]=!o,t=function(){var t,e,i;return t=1<=arguments.length?__slice.call(arguments,0):[],o?(e=m.adapter).stopObserving.apply(e,t):(i=m.adapter).observe.apply(i,t)},e){case"showing":for(r=0,p=(c=this.hideTriggers).length;r<p;r++)t((s=c[r]).element,s.event,this.bound.prepareToHide);t(null!=document.onresize?document:window,"resize",this.bound.reposition),t(window,"scroll",this.bound.reposition);break;case"visible":for(a=0,d=(f=this.showTriggersWhenVisible).length;a<d;a++)t((s=f[a]).element,s.event,this.bound.prepareToShow);break;case"hiding":for(h=0,u=(g=this.showTriggers).length;h<u;h++)t((s=g[h]).element,s.event,this.bound.prepareToShow);break;case"hidden":break;default:throw new Error("Unknown state: "+e)}return null},T.prototype.prepareToShow=function(){if(this._abortHiding(),this._abortShowing(),!this.visible)return this.debug("Showing in "+this.options.delay+"s."),null==this.container&&this._setup(),this.options.group&&T._abortShowingGroup(this.options.group,this),this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0)},T.prototype.show=function(){var e=this;if(this._abortHiding(),!this.visible)return this._clearTimeouts(),this._triggerElementExists()?(this.debug("Showing now."),null==this.container&&this._setup(),this.options.group&&T._hideGroup(this.options.group,this),this.visible=!0,this.preparingToShow=!1,null==this.tooltipElement&&this._buildElements(),this._updateElementContent(),!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax(),this._searchAndActivateCloseButtons(),this._startEnsureTriggerElement(),this.adapter.css(this.container,{zIndex:T.lastZIndex++}),this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible"),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this.adapter.removeClass(this.container,this.class.hiding),this.adapter.removeClass(this.container,this.class.hidden),this.adapter.addClass(this.container,this.class.goingToShow),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var t;if(e.visible&&!e.preparingToHide)return e.adapter.removeClass(e.container,e.class.goingToShow),e.adapter.addClass(e.container,e.class.showing),t=0,e.options.showEffect&&e.options.showEffectDuration&&(t=e.options.showEffectDuration),e.setCss3Style(e.container,{transitionDuration:t+"s"}),e._visibilityStateTimeoutId=e.setTimeout(function(){return e.adapter.removeClass(e.container,e.class.showing),e.adapter.addClass(e.container,e.class.visible)},t),e._activateFirstInput()}),this._draw()):this.deactivate()},T.prototype._abortShowing=function(){if(this.preparingToShow)return this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=!1,this._setupObservers("-showing","-visible","hiding","hidden")},T.prototype.prepareToHide=function(){if(this._abortShowing(),this._abortHiding(),this.visible)return this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)},T.prototype.hide=function(){var e=this;if(this._abortShowing(),this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),this.visible=!1,this.preparingToHide=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container))return this.adapter.removeClass(this.container,this.class.visible),this.adapter.removeClass(this.container,this.class.showing),this.adapter.addClass(this.container,this.class.goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var t;return e.adapter.removeClass(e.container,e.class.goingToHide),e.adapter.addClass(e.container,e.class.hiding),t=0,e.options.hideEffect&&e.options.hideEffectDuration&&(t=e.options.hideEffectDuration),e.setCss3Style(e.container,{transitionDuration:t+"s"}),e._visibilityStateTimeoutId=e.setTimeout(function(){if(e.adapter.removeClass(e.container,e.class.hiding),e.adapter.addClass(e.container,e.class.hidden),e.setCss3Style(e.container,{transitionDuration:"0s"}),e.options.removeElementsOnHide)return e.debug("Removing HTML elements."),e.adapter.remove(e.container),delete e.container,delete e.tooltipElement},t)})},T.prototype._abortHiding=function(){if(this.preparingToHide)return this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible")},T.prototype.reposition=function(){var t,e,i,o=this;if(null!=(t=this.getPosition())&&(e=this.options.stem,this.options.containInViewport&&(t=(i=this._ensureViewportContainment(t)).position,e=i.stem),!this._positionsEqual(t,this.currentPosition)))return this.options.stem&&!e.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=t,this.currentStem=e,this._draw(),this.adapter.css(this.container,{left:t.left+"px",top:t.top+"px"}),this.defer(function(){var t;return(t=o.adapter.unwrap(o.container)).style.visibility="hidden",t.offsetHeight,t.style.visibility="visible"})},T.prototype.getPosition=function(t,e,i){var o,s,n,r,a,h,l,p,d;if(this.container)return null==t&&(t=this.options.tipJoint),null==e&&(e=this.options.targetJoint),r={},this.options.target?(l=this.adapter.offset(this.options.target),h=this.adapter.dimensions(this.options.target),r=l,e.right?null!=(p=this.adapter.unwrap(this.options.target)).getBoundingClientRect?r.left=p.getBoundingClientRect().right+(null!=(d=window.pageXOffset)?d:document.body.scrollLeft):r.left+=h.width:e.center&&(r.left+=Math.round(h.width/2)),e.bottom?r.top+=h.height:e.middle&&(r.top+=Math.round(h.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(r.left+=this.options.borderWidth),this.options.tipJoint.right&&(r.left-=this.options.borderWidth),this.options.tipJoint.top?r.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(r.top-=this.options.borderWidth))):r=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:mousePosition.y,left:mousePosition.x},this.options.autoOffset&&(n=(a=this.options.stem?this.options.stemLength:0)&&this.options.fixed?2:10,o=t.middle&&!this.options.fixed?15:0,s=t.center&&!this.options.fixed?15:0,t.right?r.left-=n+o:t.left&&(r.left+=n+o),t.bottom?r.top-=n+s:t.top&&(r.top+=n+s),a&&(null==i&&(i=this.options.stem),i.right?r.left-=a:i.left&&(r.left+=a),i.bottom?r.top-=a:i.top&&(r.top+=a))),r.left+=this.options.offset[0],r.top+=this.options.offset[1],t.right?r.left-=this.dimensions.width:t.center&&(r.left-=Math.round(this.dimensions.width/2)),t.bottom?r.top-=this.dimensions.height:t.middle&&(r.top-=Math.round(this.dimensions.height/2)),r},T.prototype._ensureViewportContainment=function(t){var e,i,o,s,n,r,a,h,l,p,d;if(o={position:t,stem:a=this.options.stem},!this.visible||!t)return o;if(!(h=this._sticksOut(t))[0]&&!h[1])return o;if(p=new T.Joint(this.options.tipJoint),this.options.targetJoint&&(l=new T.Joint(this.options.targetJoint)),r=this.adapter.scrollOffset(),d=this.adapter.viewportDimensions(),e=![t.left-r[0],t.top-r[1]],d.width>=this.dimensions.width&&h[0])switch(e=!0,h[0]){case this.STICKS_OUT_LEFT:p.setHorizontal("left"),this.options.targetJoint&&l.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:p.setHorizontal("right"),this.options.targetJoint&&l.setHorizontal("left")}if(d.height>=this.dimensions.height&&h[1])switch(e=!0,h[1]){case this.STICKS_OUT_TOP:p.setVertical("top"),this.options.targetJoint&&l.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:p.setVertical("bottom"),this.options.targetJoint&&l.setVertical("top")}return e?(this.options.stem&&(a=p),t=this.getPosition(p,l,a),n=s=!1,(i=this._sticksOut(t))[0]&&i[0]!==h[0]&&(s=!0,p.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&l.setHorizontal(this.options.targetJoint.horizontal)),i[1]&&i[1]!==h[1]&&(n=!0,p.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&l.setVertical(this.options.targetJoint.vertical)),s&&n?o:((s||n)&&(this.options.stem&&(a=p),t=this.getPosition(p,l,a)),{position:t,stem:a})):o},T.prototype._sticksOut=function(t){var e,i,o,s;return i=this.adapter.scrollOffset(),s=this.adapter.viewportDimensions(),o=[!(e=[t.left-i[0],t.top-i[1]]),!1],e[0]<0?o[0]=this.STICKS_OUT_LEFT:e[0]+this.dimensions.width>s.width&&(o[0]=this.STICKS_OUT_RIGHT),e[1]<0?o[1]=this.STICKS_OUT_TOP:e[1]+this.dimensions.height>s.height&&(o[1]=this.STICKS_OUT_BOTTOM),o},T.prototype._draw=function(){var t,e,i,o,d,a,s,u,c,f,h,n,l,p,r,g,m,v,_,y=this;if(this.backgroundCanvas&&this.redraw){if(this.debug("Drawing background."),this.redraw=!1,this.currentStem){for(r=0,g=(m=["top","right","bottom","left"]).length;r<g;r++)n=m[r],this.adapter.removeClass(this.container,"stem-"+n);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal),this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)}return a=[0,0],s=[0,0],0<=__indexOf.call(this.options.hideTriggers,"closeButton")&&(d=new T.Joint("top right"===(null!=(v=this.currentStem)?v.toString():void 0)?"top left":"top right"),a=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],s=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]),i=this.adapter.clone(this.dimensions),o=[0,0],this.options.borderWidth&&(i.width+=2*this.options.borderWidth,i.height+=2*this.options.borderWidth,o[0]-=this.options.borderWidth,o[1]-=this.options.borderWidth),this.options.shadow&&(i.width+=2*this.options.shadowBlur,i.width+=Math.max(0,this.options.shadowOffset[0]-2*this.options.shadowBlur),i.height+=2*this.options.shadowBlur,i.height+=Math.max(0,this.options.shadowOffset[1]-2*this.options.shadowBlur),o[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),o[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1])),e={left:0,right:0,top:0,bottom:0},this.currentStem&&(this.currentStem.left?e.left=this.options.stemLength:this.currentStem.right&&(e.right=this.options.stemLength),this.currentStem.top?e.top=this.options.stemLength:this.currentStem.bottom&&(e.bottom=this.options.stemLength)),d&&(d.left?e.left=Math.max(e.left,s[0]):d.right&&(e.right=Math.max(e.right,s[0])),d.top?e.top=Math.max(e.top,s[1]):d.bottom&&(e.bottom=Math.max(e.bottom,s[1]))),i.width+=e.left+e.right,i.height+=e.top+e.bottom,o[0]-=e.left,o[1]-=e.top,this.currentStem&&this.options.borderWidth&&(_=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,this.options.borderWidth),p=_.stemLength,l=_.stemBase),(t=this.adapter.unwrap(this.backgroundCanvas)).width=i.width,t.height=i.height,this.adapter.css(this.backgroundCanvas,{width:t.width+"px",height:t.height+"px",left:o[0]+"px",top:o[1]+"px"}),(u=t.getContext("2d")).setTransform(1,0,0,1,0,0),u.clearRect(0,0,t.width,t.height),u.beginPath(),u.fillStyle=this._getColor(u,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal),u.lineJoin="miter",u.miterLimit=500,h=this.options.borderWidth/2,this.options.borderWidth?(u.strokeStyle=this.options.borderColor,u.lineWidth=this.options.borderWidth):(p=this.options.stemLength,l=this.options.stemBase),null==l&&(l=0),f=function(t,e,i){if(i&&u.moveTo(Math.max(l,y.options.borderRadius,a[0])+1-h,-h),e)return u.lineTo(t/2-l/2,-h),u.lineTo(t/2,-p-h),u.lineTo(t/2+l/2,-h)},c=function(t,e,i){var o,s,n,r;return t?(u.lineTo(-l+h,0-h),u.lineTo(p+h,-p-h),u.lineTo(h,l-h)):e?(r=y.options.closeButtonOffset,n=a[0],i%2!=0&&(r=[r[1],r[0]],n=a[1]),o=Math.acos(r[1]/y.options.closeButtonRadius),s=Math.acos(r[0]/y.options.closeButtonRadius),u.lineTo(-n+h,-h),u.arc(h-r[0],-h+r[1],y.options.closeButtonRadius,-(Math.PI/2+o),s,!1)):(u.lineTo(-y.options.borderRadius+h,-h),u.quadraticCurveTo(h,-h,h,y.options.borderRadius-h))},u.translate(-o[0],-o[1]),u.save(),function(){var t,e,i,o,s,n,r,a,h,l,p;for(p=[],e=h=0,l=T.positions.length/2;0<=l?h<l:l<h;e=0<=l?++h:--h)s=2*e,n=0===e||3===e?0:y.dimensions.width,r=e<2?0:y.dimensions.height,a=Math.PI/2*e,i=e%2==0?y.dimensions.width:y.dimensions.height,o=new T.Joint(T.positions[s]),t=new T.Joint(T.positions[s+1]),u.save(),u.translate(n,r),u.rotate(a),f(i,o.eql(y.currentStem),0===e),u.translate(i,0),c(t.eql(y.currentStem),t.eql(d),e),p.push(u.restore())}(),u.closePath(),u.save(),this.options.shadow&&(u.shadowColor=this.options.shadowColor,u.shadowBlur=this.options.shadowBlur,u.shadowOffsetX=this.options.shadowOffset[0],u.shadowOffsetY=this.options.shadowOffset[1]),u.fill(),u.restore(),this.options.borderWidth&&u.stroke(),u.restore(),d?(y.options.closeButtonRadius,w="top right"===d.toString()?[(x=[y.dimensions.width-y.options.closeButtonOffset[0],y.options.closeButtonOffset[1]])[0]+h,x[1]-h]:[(x=[y.options.closeButtonOffset[0],y.options.closeButtonOffset[1]])[0]-h,x[1]-h],u.translate(w[0],w[1]),b=y.options.closeButtonCrossSize/2,u.save(),u.beginPath(),u.strokeStyle=y.options.closeButtonCrossColor,u.lineWidth=y.options.closeButtonCrossLineWidth,u.lineCap="round",u.moveTo(-b,-b),u.lineTo(b,b),u.stroke(),u.beginPath(),u.moveTo(b,-b),u.lineTo(-b,b),u.stroke(),u.restore(),y.adapter.css(y.closeButtonElement,{left:x[0]-b-y.options.closeButtonLinkOverscan+"px",top:x[1]-b-y.options.closeButtonLinkOverscan+"px",width:y.options.closeButtonCrossSize+2*y.options.closeButtonLinkOverscan+"px",height:y.options.closeButtonCrossSize+2*y.options.closeButtonLinkOverscan+"px"})):void 0;var w,b,x}},T.prototype._getPathStemMeasures=function(t,e,i){var o,s,n,r;if(n=i/2,o=2*(s=Math.atan(t/2/e)),(r=n+e-2*(n/Math.sin(o))*Math.cos(s))<0)throw new Error("Sorry but your stemLength / stemBase ratio is strange.");return{stemLength:r,stemBase:Math.tan(s)*r*2}},T.prototype._getColor=function(t,e,i,o){var s,n,r,a,h;if(null==o&&(o=!1),"string"==typeof i)return i;for(n=o?t.createLinearGradient(0,0,e.width,0):t.createLinearGradient(0,0,0,e.height),r=a=0,h=i.length;a<h;r=++a)s=i[r],n.addColorStop(s[0],s[1]);return n},T.prototype._searchAndActivateCloseButtons=function(){var t,e,i,o;for(e=0,i=(o=this.adapter.findAll(this.container,"."+this.class.close)).length;e<i;e++)t=o[e],this.hideTriggers.push({element:this.adapter.wrap(t),event:"click"});if(this.currentObservers.showing&&this._setupObservers("-showing","showing"),this.currentObservers.visible)return this._setupObservers("-visible","visible")},T.prototype._activateFirstInput=function(){var t;return null!=(t=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea")))&&"function"==typeof t.focus?t.focus():void 0},T.prototype._followMousePosition=function(){if(!this.options.fixed)return T._observeMousePosition(this.bound.reposition)},T.prototype._stopFollowingMousePosition=function(){if(!this.options.fixed)return T._stopObservingMousePosition(this.bound.reposition)},T.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)},T.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)},T.prototype._clearTimeouts=function(){return clearTimeout(this._visibilityStateTimeoutId),this._clearShowTimeout(),this._clearHideTimeout()},T.prototype._triggerElementExists=function(){var t;for(t=this.adapter.unwrap(this.triggerElement);t.parentNode;){if("BODY"===t.parentNode.tagName)return!0;t=t.parentNode}return!1},T.prototype._loadAjax=function(){var i=this;if(!this.loading)return this.loaded=!1,this.loading=!0,this.adapter.addClass(this.container,this.class.loading),this.setContent(""),this.debug("Loading content from "+this.options.ajax),this.adapter.ajax({url:this.options.ajax,method:this.options.ajaxMethod,onSuccess:function(t){return i.debug("Loading successful."),i.adapter.removeClass(i.container,i.class.loading),i.setContent(t)},onError:function(t){var e;return e=i.options.ajaxErrorMessage,i.debug(e,t),i.setContent(e),i.adapter.addClass(i.container,i.class.ajaxError)},onComplete:function(){return i.adapter.removeClass(i.container,i.class.loading),i.loading=!1,i.loaded=!0,i._searchAndActivateCloseButtons(),i._activateFirstInput(),i.reposition()}})},T.prototype._ensureTriggerElement=function(){if(!this._triggerElementExists())return this.deactivate(),this._stopEnsureTriggerElement()},T.prototype._ensureTriggerElementInterval=1e3,T.prototype._startEnsureTriggerElement=function(){var t=this;return this._ensureTriggerElementTimeoutId=setInterval(function(){return t._ensureTriggerElement()},this._ensureTriggerElementInterval)},T.prototype._stopEnsureTriggerElement=function(){return clearInterval(this._ensureTriggerElementTimeoutId)},T}(),vendors=["khtml","ms","o","moz","webkit"],Opentip.prototype.setCss3Style=function(o,t){var s,n,r,a,e;for(s in o=this.adapter.unwrap(o),e=[],t)__hasProp.call(t,s)&&(n=t[s],null!=o.style[s]?e.push(o.style[s]=n):e.push(function(){var t,e,i;for(i=[],t=0,e=vendors.length;t<e;t++)r=vendors[t],a=""+this.ucfirst(r)+this.ucfirst(s),null!=o.style[a]?i.push(o.style[a]=n):i.push(void 0);return i}.call(this)));return e},Opentip.prototype.defer=function(t){return setTimeout(t,0)},Opentip.prototype.setTimeout=function(t,e){return setTimeout(t,e?1e3*e:0)},Opentip.prototype.ucfirst=function(t){return null==t?"":t.charAt(0).toUpperCase()+t.slice(1)},Opentip.prototype.dasherize=function(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})},mousePositionObservers=[],mousePosition={x:0,y:0},mouseMoved=function(t){var e,i,o,s;for(mousePosition=Opentip.adapter.mousePosition(t),s=[],i=0,o=mousePositionObservers.length;i<o;i++)e=mousePositionObservers[i],s.push(e());return s},Opentip.followMousePosition=function(){return Opentip.adapter.observe(document.body,"mousemove",mouseMoved)},Opentip._observeMousePosition=function(t){return mousePositionObservers.push(t)},Opentip._stopObservingMousePosition=function(o){var s;return mousePositionObservers=function(){var t,e,i;for(i=[],t=0,e=mousePositionObservers.length;t<e;t++)(s=mousePositionObservers[t])!==o&&i.push(s);return i}()},Opentip.Joint=function(){function t(t){null!=t&&(t instanceof Opentip.Joint&&(t=t.toString()),this.set(t))}return t.prototype.set=function(t){return t=t.toLowerCase(),this.setHorizontal(t),this.setVertical(t),this},t.prototype.setHorizontal=function(t){var e,i,o,s,n,r,a;for(o=0,n=(i=["left","center","right"]).length;o<n;o++)e=i[o],~t.indexOf(e)&&(this.horizontal=e.toLowerCase());for(null==this.horizontal&&(this.horizontal="center"),a=[],s=0,r=i.length;s<r;s++)e=i[s],a.push(this[e]=this.horizontal===e?e:void 0);return a},t.prototype.setVertical=function(t){var e,i,o,s,n,r,a;for(o=0,n=(i=["top","middle","bottom"]).length;o<n;o++)e=i[o],~t.indexOf(e)&&(this.vertical=e.toLowerCase());for(null==this.vertical&&(this.vertical="middle"),a=[],s=0,r=i.length;s<r;s++)e=i[s],a.push(this[e]=this.vertical===e?e:void 0);return a},t.prototype.eql=function(t){return null!=t&&this.horizontal===t.horizontal&&this.vertical===t.vertical},t.prototype.flip=function(){var t;return t=(Opentip.position[this.toString(!0)]+4)%8,this.set(Opentip.positions[t]),this},t.prototype.toString=function(t){var e,i;return null==t&&(t=!1),i="middle"===this.vertical?"":this.vertical,e="center"===this.horizontal?"":this.horizontal,i&&e&&(e=t?Opentip.prototype.ucfirst(e):" "+e),""+i+e},t}(),Opentip.prototype._positionsEqual=function(t,e){return null!=t&&null!=e&&t.left===e.left&&t.top===e.top},Opentip.prototype._dimensionsEqual=function(t,e){return null!=t&&null!=e&&t.width===e.width&&t.height===e.height},Opentip.prototype.debug=function(){var t;if(t=1<=arguments.length?__slice.call(arguments,0):[],Opentip.debug&&null!=("undefined"!=typeof console&&null!==console?console.debug:void 0))return t.unshift("#"+this.id+" |"),console.debug.apply(console,t)},Opentip.findElements=function(){var t,e,i,o,s,n,r,a,h,l;for(l=[],r=0,a=(h=(t=Opentip.adapter).findAll(document.body,"[data-ot]")).length;r<a;r++){for(o in i=h[r],n={},""!==(e=t.data(i,"ot"))&&"true"!==e&&"yes"!==e||(e=t.attr(i,"title"),t.attr(i,"title","")),e=e||"",Opentip.styles.standard)null!=(s=t.data(i,"ot"+Opentip.prototype.ucfirst(o)))&&("yes"===s||"true"===s||"on"===s?s=!0:"no"!==s&&"false"!==s&&"off"!==s||(s=!1),n[o]=s);l.push(new Opentip(i,e,n))}return l},Opentip.version="2.4.6",Opentip.debug=!1,Opentip.lastId=0,Opentip.lastZIndex=100,Opentip.tips=[],Opentip._abortShowingGroup=function(t,e){var i,o,s,n,r;for(r=[],o=0,s=(n=Opentip.tips).length;o<s;o++)(i=n[o])!==e&&i.options.group===t?r.push(i._abortShowing()):r.push(void 0);return r},Opentip._hideGroup=function(t,e){var i,o,s,n,r;for(r=[],o=0,s=(n=Opentip.tips).length;o<s;o++)(i=n[o])!==e&&i.options.group===t?r.push(i.hide()):r.push(void 0);return r},Opentip.adapters={},Opentip.adapter=null,firstAdapter=!0,Opentip.addAdapter=function(t){if(Opentip.adapters[t.name]=t,firstAdapter)return(Opentip.adapter=t).domReady(Opentip.findElements),t.domReady(Opentip.followMousePosition),firstAdapter=!1},Opentip.positions=["top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"],Opentip.position={},i=_i=0,_len=(_ref=Opentip.positions).length;_i<_len;i=++_i)position=_ref[i],Opentip.position[position]=i;Opentip.styles={standard:{extends:null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{extends:"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{extends:"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{extends:"standard",className:"alert",borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}},Opentip.defaultStyle="standard","undefined"!=typeof module&&null!==module?module.exports=Opentip:window.Opentip=Opentip;__slice=[].slice;!function(o){var t;o.fn.opentip=function(t,e,i){return new Opentip(this,t,e,i)},t=function(){function t(){}return t.prototype.name="jquery",t.prototype.domReady=function(t){return o(t)},t.prototype.create=function(t){return o(t)},t.prototype.wrap=function(t){if(1<(t=o(t)).length)throw new Error("Multiple elements provided.");return t},t.prototype.unwrap=function(t){return o(t)[0]},t.prototype.tagName=function(t){return this.unwrap(t).tagName},t.prototype.attr=function(){var t,e,i;return e=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],(i=o(e)).attr.apply(i,t)},t.prototype.data=function(){var t,e,i;return e=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],(i=o(e)).data.apply(i,t)},t.prototype.find=function(t,e){return o(t).find(e).get(0)},t.prototype.findAll=function(t,e){return o(t).find(e)},t.prototype.update=function(t,e,i){return t=o(t),i?t.text(e):t.html(e)},t.prototype.append=function(t,e){return o(t).append(e)},t.prototype.remove=function(t){return o(t).remove()},t.prototype.addClass=function(t,e){return o(t).addClass(e)},t.prototype.removeClass=function(t,e){return o(t).removeClass(e)},t.prototype.css=function(t,e){return o(t).css(e)},t.prototype.dimensions=function(t){return{width:o(t).outerWidth(),height:o(t).outerHeight()}},t.prototype.scrollOffset=function(){return[window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]},t.prototype.viewportDimensions=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},t.prototype.mousePosition=function(t){return null==t?null:{x:t.pageX,y:t.pageY}},t.prototype.offset=function(t){var e;return{left:(e=o(t).offset()).left,top:e.top}},t.prototype.observe=function(t,e,i){return o(t).bind(e,i)},t.prototype.stopObserving=function(t,e,i){return o(t).unbind(e,i)},t.prototype.ajax=function(e){var t,i;if(null==e.url)throw new Error("No url provided");return o.ajax({url:e.url,type:null!=(t=null!=(i=e.method)?i.toUpperCase():void 0)?t:"GET"}).done(function(t){return"function"==typeof e.onSuccess?e.onSuccess(t):void 0}).fail(function(t){return"function"==typeof e.onError?e.onError("Server responded with status "+t.status):void 0}).always(function(){return"function"==typeof e.onComplete?e.onComplete():void 0})},t.prototype.clone=function(t){return o.extend({},t)},t.prototype.extend=function(){var t,e;return e=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],o.extend.apply(o,[e].concat(__slice.call(t)))},t}(),Opentip.addAdapter(new t)}(jQuery),document.createElement("canvas").getContext||function(){var H=Math,J=H.round,f=H.sin,g=H.cos,s=H.abs,n=H.sqrt,j=10,m=j/2;function i(){return this.context_||(this.context_=new u(this))}var r=Array.prototype.slice;var t={init:function(t){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var e=t||document;e.createElement("canvas"),e.attachEvent("onreadystatechange",function(t,e,i){var o=r.call(arguments,2);return function(){return t.apply(e,o.concat(r.call(arguments)))}}(this.init_,this,e))}},init_:function(t){if(t.namespaces.g_vml_||t.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),t.namespaces.g_o_||t.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),!t.styleSheets.ex_canvas_){var e=t.createStyleSheet();e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var i=t.getElementsByTagName("canvas"),o=0;o<i.length;o++)this.initElement(i[o])},initElement:function(t){if(!t.getContext){t.getContext=i,t.innerHTML="",t.attachEvent("onpropertychange",o),t.attachEvent("onresize",a);var e=t.attributes;e.width&&e.width.specified?t.style.width=e.width.nodeValue+"px":t.width=t.clientWidth,e.height&&e.height.specified?t.style.height=e.height.nodeValue+"px":t.height=t.clientHeight}return t}};function o(t){var e=t.srcElement;switch(t.propertyName){case"width":e.style.width=e.attributes.width.nodeValue+"px",e.getContext().clearRect();break;case"height":e.style.height=e.attributes.height.nodeValue+"px",e.getContext().clearRect()}}function a(t){var e=t.srcElement;e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}t.init();for(var h=[],e=0;e<16;e++)for(var l=0;l<16;l++)h[16*e+l]=e.toString(16)+l.toString(16);function p(t,e){for(var i=[[1,0,0],[0,1,0],[0,0,1]],o=0;o<3;o++)for(var s=0;s<3;s++){for(var n=0,r=0;r<3;r++)n+=t[o][r]*e[r][s];i[o][s]=n}return i}function d(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function A(t){var e,i=1;if("rgb"==(t=String(t)).substring(0,3)){var o=t.indexOf("(",3),s=t.indexOf(")",o+1),n=t.substring(o+1,s).split(",");e="#";for(var r=0;r<3;r++)e+=h[Number(n[r])];4==n.length&&"a"==t.substr(3,1)&&(i=n[3])}else e=t;return{color:e,alpha:i}}function u(t){this.m_=[[1,0,0],[0,1,0],[0,0,1]],this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*j,this.globalAlpha=1;var e=(this.canvas=t).ownerDocument.createElement("div");e.style.width=t.clientWidth+"px",e.style.height=t.clientHeight+"px",e.style.position="absolute",t.appendChild(e),this.element_=e,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}var c=u.prototype;function v(t,e,i,o){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:o.x,y:o.y}),t.currentX_=o.x,t.currentY_=o.y}function _(t,e,i){if(function(t){for(var e=0;e<3;e++)for(var i=0;i<2;i++)if(!isFinite(t[e][i])||isNaN(t[e][i]))return!1;return!0}(e)&&(t.m_=e,i)){var o=e[0][0]*e[1][1]-e[0][1]*e[1][0];t.lineScale_=n(s(o))}}function y(t){this.type_=t,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function w(){}c.clearRect=function(){this.element_.innerHTML=""},c.beginPath=function(){this.currentPath_=[]},c.moveTo=function(t,e){var i=this.getCoords_(t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},c.lineTo=function(t,e){var i=this.getCoords_(t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},c.bezierCurveTo=function(t,e,i,o,s,n){var r=this.getCoords_(s,n);v(this,this.getCoords_(t,e),this.getCoords_(i,o),r)},c.quadraticCurveTo=function(t,e,i,o){var s=this.getCoords_(t,e),n=this.getCoords_(i,o),r={x:this.currentX_+2/3*(s.x-this.currentX_),y:this.currentY_+2/3*(s.y-this.currentY_)};v(this,r,{x:r.x+(n.x-this.currentX_)/3,y:r.y+(n.y-this.currentY_)/3},n)},c.arc=function(t,e,i,o,s,n){i*=j;var r=n?"at":"wa",a=t+g(o)*i-m,h=e+f(o)*i-m,l=t+g(s)*i-m,p=e+f(s)*i-m;a!=l||n||(a+=.125);var d=this.getCoords_(t,e),u=this.getCoords_(a,h),c=this.getCoords_(l,p);this.currentPath_.push({type:r,x:d.x,y:d.y,radius:i,xStart:u.x,yStart:u.y,xEnd:c.x,yEnd:c.y})},c.rect=function(t,e,i,o){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+o),this.lineTo(t,e+o),this.closePath()},c.strokeRect=function(t,e,i,o){var s=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+o),this.lineTo(t,e+o),this.closePath(),this.stroke(),this.currentPath_=s},c.fillRect=function(t,e,i,o){var s=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+o),this.lineTo(t,e+o),this.closePath(),this.fill(),this.currentPath_=s},c.createLinearGradient=function(t,e,i,o){var s=new y("gradient");return s.x0_=t,s.y0_=e,s.x1_=i,s.y1_=o,s},c.createRadialGradient=function(t,e,i,o,s,n){var r=new y("gradientradial");return r.x0_=t,r.y0_=e,r.r0_=i,r.x1_=o,r.y1_=s,r.r1_=n,r},c.drawImage=function(t,e){var i,o,s,n,r,a,h,l,p=t.runtimeStyle.width,d=t.runtimeStyle.height;t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var u=t.width,c=t.height;if(t.runtimeStyle.width=p,t.runtimeStyle.height=d,3==arguments.length)i=e,o=arguments[2],r=a=0,h=s=u,l=n=c;else if(5==arguments.length)i=e,o=arguments[2],s=arguments[3],n=arguments[4],r=a=0,h=u,l=c;else{if(9!=arguments.length)throw Error("Invalid number of arguments");r=e,a=arguments[2],h=arguments[3],l=arguments[4],i=arguments[5],o=arguments[6],s=arguments[7],n=arguments[8]}var f=this.getCoords_(i,o),g=[];if(g.push(" <g_vml_:group",' coordsize="',10*j,",",10*j,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]){var m=[];m.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",J(f.x/j),",","Dy=",J(f.y/j),"");var v=f,_=this.getCoords_(i+s,o),y=this.getCoords_(i,o+n),w=this.getCoords_(i+s,o+n);v.x=H.max(v.x,_.x,y.x,w.x),v.y=H.max(v.y,_.y,y.y,w.y),g.push("padding:0 ",J(v.x/j),"px ",J(v.y/j),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",m.join(""),", sizingmethod='clip');")}else g.push("top:",J(f.y/j),"px;left:",J(f.x/j),"px;");g.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',j*s,"px;"," height:",j*n,'px;"',' cropleft="',r/u,'"',' croptop="',a/c,'"',' cropright="',(u-r-h)/u,'"',' cropbottom="',(c-a-l)/c,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",g.join(""))},c.stroke=function(t){var e=[],i=A(t?this.fillStyle:this.strokeStyle),o=i.color,s=i.alpha*this.globalAlpha;e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0 0" coordsize="',10*j," ",10*j,'"',' stroked="',!t,'"',' path="');for(var n={x:null,y:null},r={x:null,y:null},a=0;a<this.currentPath_.length;a++){var h=this.currentPath_[a];switch(h.type){case"moveTo":h,e.push(" m ",J(h.x),",",J(h.y));break;case"lineTo":e.push(" l ",J(h.x),",",J(h.y));break;case"close":e.push(" x "),h=null;break;case"bezierCurveTo":e.push(" c ",J(h.cp1x),",",J(h.cp1y),",",J(h.cp2x),",",J(h.cp2y),",",J(h.x),",",J(h.y));break;case"at":case"wa":e.push(" ",h.type," ",J(h.x-this.arcScaleX_*h.radius),",",J(h.y-this.arcScaleY_*h.radius)," ",J(h.x+this.arcScaleX_*h.radius),",",J(h.y+this.arcScaleY_*h.radius)," ",J(h.xStart),",",J(h.yStart)," ",J(h.xEnd),",",J(h.yEnd))}h&&((null==n.x||h.x<n.x)&&(n.x=h.x),(null==r.x||h.x>r.x)&&(r.x=h.x),(null==n.y||h.y<n.y)&&(n.y=h.y),(null==r.y||h.y>r.y)&&(r.y=h.y))}if(e.push(' ">'),t)if("object"==typeof this.fillStyle){var l=this.fillStyle,p=0,d={x:0,y:0},u=0,c=1;if("gradient"==l.type_){var f=l.x0_/this.arcScaleX_,g=l.y0_/this.arcScaleY_,m=l.x1_/this.arcScaleX_,v=l.y1_/this.arcScaleY_,_=this.getCoords_(f,g),y=this.getCoords_(m,v),w=y.x-_.x,b=y.y-_.y;(p=180*Math.atan2(w,b)/Math.PI)<0&&(p+=360),p<1e-6&&(p=0)}else{_=this.getCoords_(l.x0_,l.y0_);var x=r.x-n.x,T=r.y-n.y;d={x:(_.x-n.x)/x,y:(_.y-n.y)/T},x/=this.arcScaleX_*j,T/=this.arcScaleY_*j;var C=H.max(x,T);u=2*l.r0_/C,c=2*l.r1_/C-u}var O=l.colors_;O.sort(function(t,e){return t.offset-e.offset});var S=O.length,E=O[0].color,P=O[S-1].color,M=O[0].alpha*this.globalAlpha,k=O[S-1].alpha*this.globalAlpha,B=[];for(a=0;a<S;a++){var L=O[a];B.push(L.offset*c+u+" "+L.color)}e.push('<g_vml_:fill type="',l.type_,'"',' method="none" focus="100%"',' color="',E,'"',' color2="',P,'"',' colors="',B.join(","),'"',' opacity="',k,'"',' g_o_:opacity2="',M,'"',' angle="',p,'"',' focusposition="',d.x,",",d.y,'" />')}else e.push('<g_vml_:fill color="',o,'" opacity="',s,'" />');else{var I=this.lineScale_*this.lineWidth;I<1&&(s*=I),e.push("<g_vml_:stroke",' opacity="',s,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',function(t){switch(t){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}(this.lineCap),'"',' weight="',I,'px"',' color="',o,'" />')}e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},c.fill=function(){this.stroke(!0)},c.closePath=function(){this.currentPath_.push({type:"close"})},c.getCoords_=function(t,e){var i=this.m_;return{x:j*(t*i[0][0]+e*i[1][0]+i[2][0])-m,y:j*(t*i[0][1]+e*i[1][1]+i[2][1])-m}},c.save=function(){var t={};d(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=p([[1,0,0],[0,1,0],[0,0,1]],this.m_)},c.restore=function(){d(this.aStack_.pop(),this),this.m_=this.mStack_.pop()},c.translate=function(t,e){_(this,p([[1,0,0],[0,1,0],[t,e,1]],this.m_),!1)},c.rotate=function(t){var e=g(t),i=f(t);_(this,p([[e,i,0],[-i,e,0],[0,0,1]],this.m_),!1)},c.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e,_(this,p([[t,0,0],[0,e,0],[0,0,1]],this.m_),!0)},c.transform=function(t,e,i,o,s,n){_(this,p([[t,e,0],[i,o,0],[s,n,1]],this.m_),!0)},c.setTransform=function(t,e,i,o,s,n){_(this,[[t,e,0],[i,o,0],[s,n,1]],!0)},c.clip=function(){},c.arcTo=function(){},c.createPattern=function(){return new w},y.prototype.addColorStop=function(t,e){e=A(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})},G_vmlCanvasManager=t,CanvasRenderingContext2D=u,CanvasGradient=y,CanvasPattern=w}();